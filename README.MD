## ì‹¤í–‰ ë°©ë²•

í•´ë‹¹ í”„ë¡œì íŠ¸ë¥¼ ë¡œì»¬ì„œë²„ì—ì„œ ì‹¤í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” Git ê³¼ Npm (node.jsë¥¼ í¬í•¨) ì´ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.

1. ë ˆíŒŒì§€í† ë¦¬ í´ë¡ 

   ```
   https://github.com/preOnboarding8-team1/pre-onboarding-8th-4-1.git
   ```

2. packages ì„¤ì¹˜

   ```bash
   npm install
   ```

3. ì‹¤í–‰

   ```bash
   # client ì‹¤í–‰ : localhost:3000
   npm start

   # server ì‹¤í–‰ : localhost:4000
   npm run api
   ```

<br />

### Assignment1

- [x] ëŒ“ê¸€ ë¶ˆëŸ¬ì˜¤ê¸°, ì‘ì„±, ìˆ˜ì •, ì‚­ì œê°€ ë™ì‘í•˜ë„ë¡ ê¸°ëŠ¥ êµ¬í˜„

   <br />

  ```jsx
    export const getComment = createAsyncThunk("GET_COMMENT", async () => {
    const response = await commentApi.getAllComments();
    return response.data;
    })

    export const getCommentByPage = createAsyncThunk("GET_COMMNET_PAGE", async (page:number) => {
        const respose = await commentApi.getComments(page);
        return respose.data
    })

    export const addComment = createAsyncThunk("ADD_COMMENT", async (comment: Comment) => {
        const response = await commentApi.addComment(comment);
        return response.data
    })

    export const deleteComment = createAsyncThunk("DEL_COMMENT", async (id: number) => {
        await commentApi.deleteComment(id);
        return id
    })

    export const updateComment = createAsyncThunk("UPDATE_COMMENT", async (comment: Comment) => {
        const response = await commentApi.updateComment(comment.id, comment);
        return response.data
    })

    const initialState: CommentsState = {
    comments: [],
    pageComments : [],
    lastId: 0,
    length: 0,
    };

    const commentsSlice = createSlice({
    name: 'comments',
    initialState,
    reducers: {},
    extraReducers: (builder) => {
        builder
        .addCase(addComment.fulfilled, (state, action) => {
            state.comments.push(action.payload);
            state.lastId += 1;
        })
        .addCase(getComment.fulfilled, (state, action) => {
            state.comments = action.payload;
            state.lastId = state.comments[state.comments.length - 1].id;
            state.length = state.comments.length;
        })
        .addCase(deleteComment.fulfilled, (state, action) => {
            state.comments = state.comments.filter((comment) => comment.id !== action.payload);
        })
        .addCase(updateComment.fulfilled, (state, action) => {
            state.comments = state.comments.map((comment) => {
            if (comment.id === action.payload.id) {
                return action.payload;
            }
            return comment;
            });
            state.pageComments = state.pageComments.map((comment) => {
                if (comment.id === action.payload.id) {
                return action.payload;
                }
                return comment;
            })
        })
        .addCase(getCommentByPage.fulfilled, (state, action) => {
            state.pageComments = action.payload;
        } );
    },
    });

    export const commentActions = commentsSlice.actions;

    export default commentsSlice;
  ```

  > ğŸ“Œ ë¹„ë™ê¸° ì•¡ì…˜ì„ ì²˜ë¦¬í•˜ëŠ” thunkì™€ ë¹„ë™ê¸° ì•¡ì…˜ì— ëŒ€í•œ extreReducerë¥¼ ì‚¬ìš©í•´ CRUDê°€ ë™ì‘í•˜ê²Œ ê¸°ëŠ¥ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

## <br />

### Assignment2

- [x] í˜ì´ì§€ë„¤ì´ì…˜

   <br />

  ```jsx
    import { createSlice } from '@reduxjs/toolkit';
    import { PageState } from '../types/types';

    const initialState: PageState = {
    page: 1,
    };

    const pageSlice = createSlice({
        name : 'page',
        initialState,
        reducers : {
            replacePage(state,action) {
                state.page = action.payload
            }
        },
    })

    export const pageActions = pageSlice.actions;

    export default pageSlice;

    const PageList = () => {
    const dispatch = useAppDispatch();
    const page = useAppSelector((state)=>state.page.page)
    const comment = useAppSelector((state)=>state.comments.comments)
    const pageArray = [];
    const pageHandler = (i) => {
        dispatch(pageActions.replacePage(i))
    }
    const pages = Math.ceil(useAppSelector((state) => state.comments.length) / 10);
    for (let i = 1; i <= pages; i++) {
        pageArray.push(
        <Page key={i} onClick={() => pageHandler(i)} active={page === i}>
            {i}
        </Page>
        );
    }

    useEffect(()=>{
        dispatch(getCommentByPage(page))
    },[dispatch,page,comment])

    return <PageListStyle>{pageArray}</PageListStyle>;
    };
  ```

  > ğŸ“Œ í˜ì´ì§€ ìƒíƒœë¥¼ ë‹´ë‹¹í•˜ëŠ” reducerë¥¼ í†µí•´, í˜ì´ì§€ì— ë§ëŠ” ë°ì´í„°ë¥¼ ìš”ì²­í•˜ëŠ” actionì„ í˜¸ì¶œí•´ì„œ í˜ì´ì§€ë„¤ì´ì…˜ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. 

## <br />

### Assignment3

- [x] ëŒ“ê¸€ ì‘ì„±, ìˆ˜ì •, ì‚­ì œ í›„ ë™ì‘

   <br />

  ```jsx
    const sumbitHandler = (e: React.FormEvent<HTMLFormElement>) => {
    e.preventDefault();
    const comment = {
      id: id + 1,
      content,
      author,
      createdAt,
      profile_url: url,
    };
    dispatch(addComment(comment));
    dispatch(pageActions.replacePage(1));
    onReset();
    };

    const handleDelete = () => {
    dispatch(deleteComment(id));
    dispatch(pageActions.replacePage(1));
    };
  ```

  > ğŸ“Œ ë“±ë¡ê³¼ ì‚­ì œ í›„ í˜ì´ì§€ ìƒíƒœë¥¼ ë‹´ë‹¹í•˜ëŠ” reducerë¥¼ í†µí•´ ì²«ë²ˆì§¸ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤. 
<br />
